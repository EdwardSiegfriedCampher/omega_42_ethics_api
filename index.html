<!DOCTYPE html>
<html lang="en" data-theme="light">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Ω42 Interface</title>
  <style>
    body {
      margin: 0;
      font-family: system-ui, sans-serif;
      transition: background 0.5s, color 0.5s;
    }
    body[data-theme="dark"] {
      background: linear-gradient(to bottom right, #0a0a0a, #1a1a1a);
      color: #eee;
    }
    body[data-theme="light"] {
      background: linear-gradient(to bottom right, #e6f0fb, #d1e3f5);
      color: #000;
    }
    header {
      padding: 1rem;
      display: flex;
      justify-content: space-between;
      align-items: center;
      flex-wrap: wrap;
      border-bottom: 2px solid #ccc;
    }
    .header-buttons {
      display: flex;
      gap: 0.5rem;
      align-items: center;
    }
    #filters, #counters {
      padding: 0.5rem 1rem;
    }
    #filters {
      margin-top: 0.5rem;
    }
    #prompt-container {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 1rem;
      padding: 1rem;
    }
    .prompt-card {
      border-radius: 8px;
      padding: 1rem;
      transition: transform 0.3s ease;
      color: #fff;
    }
    .prompt-card:hover {
      transform: scale(1.02);
    }
    .Meta-Theorems { background: #f7b32b; }
    .Ethics { background: #70c1b3; }
    .Truth-Engine { background: #f25f5c; }
    .Machine-Logic { background: #50514f; }
    #readme {
      display: none;
      padding: 1rem;
      margin-top: 1rem;
      border-top: 2px solid;
    }
    body[data-theme="dark"] #readme {
      background: #1a1a1a;
      color: #f0f0f0;
      border-top-color: #444;
    }
    body[data-theme="light"] #readme {
      background: #eef6ff;
      color: #000;
      border-top-color: #ccc;
    }
  </style>
</head>
<body>
  <header>
    <h1 title="Ω42 = Absolute Recursive Coherence">Omega 42 Interface</h1>
    <div class="header-buttons">
      <label for="category-select">Category:</label>
      <select id="category-select">
        <option value="all">All</option>
      </select>
      <button id="toggle-theme">Toggle Theme</button>
      <button id="suggest-btn">Suggest</button>
      <button id="dev-btn">Dev</button>
      <button id="readme-toggle">README</button>
    </div>
  </header>

  <section id="counters">
    <span>Total Prompts: <span id="total-count">0</span></span>
    <span>Visible: <span id="visible-count">0</span></span>
  </section>

  <main id="prompt-container" class="grid-3x2"></main>

  <section id="readme">
    <h2>Ω42 ReadMe</h2>
    <p>This interface renders 49 prompt cards filtered by Omega construct categories. It includes recursive validation logic via the ΩTE and ΦEE engines, supporting light/dark mode and future JSON-driven updates.</p>
  </section>

  <script>
    const categories = [
      { name: 'Meta-Theorems', color: '#f7b32b' },
      { name: 'Ethics', color: '#70c1b3' },
      { name: 'Truth Engine', color: '#f25f5c' },
      { name: 'Machine Logic', color: '#50514f' }
    ];

    const prompts = Array.from({ length: 49 }, (_, i) => {
      const cat = categories[i % categories.length];
      return {
        id: i + 1,
        category: cat.name,
        color: cat.color,
        text: `Prompt #${i + 1}: Insight for Omega layer ${i + 1}`,
        phiScore: 0.042,
        oai: 0.91
      };
    });

    const promptContainer = document.getElementById('prompt-container');
    const categorySelect = document.getElementById('category-select');
    const totalCount = document.getElementById('total-count');
    const visibleCount = document.getElementById('visible-count');

    function renderPrompts(filter = 'all') {
      promptContainer.innerHTML = '';
      const filtered = prompts.filter(p => filter === 'all' || p.category === filter);

      filtered.forEach(p => {
        if (!isValid(p)) return;
        const card = document.createElement('div');
        card.className = 'prompt-card';
        card.style.background = p.color;
        card.innerHTML = `<strong>[${p.category}]</strong><p>${p.text}</p>`;
        promptContainer.appendChild(card);
      });

      totalCount.textContent = prompts.length;
      visibleCount.textContent = filtered.filter(isValid).length;
    }

    function isValid(p) {
      return p.phiScore >= 0.0303 && p.oai >= 0.82;
    }

    categories.forEach(c => {
      const option = document.createElement('option');
      option.value = c.name;
      option.textContent = c.name;
      categorySelect.appendChild(option);
    });

    categorySelect.addEventListener('change', e => renderPrompts(e.target.value));

    document.getElementById('toggle-theme').addEventListener('click', () => {
      const current = document.documentElement.getAttribute('data-theme');
      const next = current === 'dark' ? 'light' : 'dark';
      document.documentElement.setAttribute('data-theme', next);
      localStorage.setItem('theme', next);
    });

    document.getElementById('readme-toggle').addEventListener('click', () => {
      const readme = document.getElementById('readme');
      readme.style.display = readme.style.display === 'block' ? 'none' : 'block';
    });

    const savedTheme = localStorage.getItem('theme');
    if (savedTheme) document.documentElement.setAttribute('data-theme', savedTheme);

    renderPrompts();
  </script>
</body>
</html>
